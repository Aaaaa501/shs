function getPeriod(a,b,d,e){if(e<a[0]||e>=b[b.length-1])return{schoolStarted:!(e<a[0]),schoolOver:e>=b[b.length-1]};for(var f,c=0;c<a.length;c++)if(e>=a[c]&&(f=c,e<b[c]))return{inSession:!0,period:d[c],start:a[c],end:b[c],schoolStarted:!0,schoolOver:!1};return{inSession:!0,period:"!Passing",start:b[f],end:a[f+1],schoolStarted:!0,schoolOver:!1}}
var Bell=function(a){this.date=a;var b=a.getMinutesOffset(),d=a.toLocaleDateString();a.getDay()%6&&-1==constants.holidays.indexOf(d)?(this.school=!0,-1!=constants.latearrival.indexOf(d)?(a=getPeriod(constants.latearrival_s,constants.latearrival_e,constants.latearrival_p,b),a.schedule="Late Arrival"):-1!=constants.activityperiod.indexOf(d)?(a=getPeriod(constants.activityperiod_s,constants.activityperiod_e,constants.activityperiod_p,b),a.schedule="Activity Schedule"):-1!=constants.pmassembly.indexOf(d)?
(a=getPeriod(constants.pmassembly_s,constants.pmassembly_e,constants.pmassembly_p,b),a.schedule="PM Assembly"):(a=getPeriod(constants.standard_s,constants.standard_e,constants.standard_p,b),a.schedule="Standard Schedule"),this.schoolOver=a.schoolOver,this.schoolStarted=a.schoolStarted,this.schedule=a.schedule,this.period={period:a.period,start:a.start,end:a.end}):this.schoolOver=this.schoolStarted=this.school=!1};Bell.prototype.nextPeriod=function(){this.date.setMinutesOffset(this.period.end+5);return new Bell(this.date)};
$(function(){Date.prototype.getMinutesOffset=function(){return 60*this.getHours()+this.getMinutes()};Date.prototype.setMinutesOffset=function(a){var b=Number.parseInt(a/60);a%=60;this.setHours(b);this.setMinutes(a)}});