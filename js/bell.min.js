function getCurrentDate(){var a=window.location.search.indexOf("currentDate=");a=-1<a?window.location.search.substring(a+12):Date.now();return new Date(parseInt(a))}
function getPeriod(a,c,e,b){if(b<a[0]||b>=c[c.length-1])return{schoolStarted:!(b<a[0]),schoolOver:b>=c[c.length-1]};for(var d,f=0;f<a.length;f++)if(b>=a[f]&&(d=f,b<c[f]))return{inSession:!0,period:e[f],start:a[f],end:c[f],schoolStarted:!0,schoolOver:!1};return{inSession:!0,period:"!Passing",start:c[d],end:a[d+1],schoolStarted:!0,schoolOver:!1}}
var Bell=function(a){this.date=a=new Date(a);var c=a.getMinutesOffset(),e=a.toLocaleDateString();if(a.getDay()%6&&-1==constants.holidays.indexOf(e)){this.school=!0;var b="Standard Schedule",d;for(d in constants.dates)-1<constants.dates[d].indexOf(e)&&(b=d);e=constants.schedules[b].periods;if(e[0].constructor===Array){for(d=-1;-1<constants.dates[b].indexOf(a.toLocaleDateString());)d++,a.setDate(a.getDate()-1);e=e[d]}a=getPeriod(constants.schedules[b].start,constants.schedules[b].end,e,c);this.schoolOver=
a.schoolOver;this.schoolStarted=a.schoolStarted;this.schedule=b;this.period={period:a.period,start:a.start,end:a.end}}else this.schoolOver=this.schoolStarted=this.school=!1};Bell.prototype.nextPeriod=function(){this.date.setMinutesOffset(this.period.end+5);return new Bell(this.date)};$(function(){Date.prototype.getMinutesOffset=function(){return 60*this.getHours()+this.getMinutes()};Date.prototype.setMinutesOffset=function(a){var c=Number.parseInt(a/60);a%=60;this.setHours(c);this.setMinutes(a)}});
