function getCurrentDate(){var a=window.location.search.indexOf("currentDate=");a=-1<a?window.location.search.substring(a+12):Date.now();return new Date(parseInt(a))}
function getPeriod(a,e,f,c){if(c<a[0]||c>=e[e.length-1])return{schoolStarted:!(c<a[0]),schoolOver:c>=e[e.length-1]};for(var b,d=0;d<a.length;d++)if(c>=a[d]&&(b=d,c<e[d]))return{inSession:!0,period:f[d],start:a[d],end:e[d],schoolStarted:!0,schoolOver:!1};return{inSession:!0,period:"!Passing",start:e[b],end:a[b+1],schoolStarted:!0,schoolOver:!1}}
var Bell=function(a,e){this.date=a=new Date(a);var f=a.getMinutesOffset(),c=a.toLocaleDateString();if(a.getDay()%6&&-1==constants.holidays.indexOf(c)){this.school=!0;var b="Standard Schedule";for(d in constants.dates)-1<constants.dates[d].indexOf(c)&&(b=d);c=constants.schedules[b].nh_version?constants.schedules[b].periods_nh:constants.schedules[b].periods;var d=document.getElementById("half-periods-checkbox").checked;constants.schedules[b].nh_version&&$("#half-period-info").hide();if(c[0].constructor===
Array){for(var g=-1;-1<constants.dates[b].indexOf(a.toLocaleDateString());)g++,a.setDate(a.getDate()-1);c=c[g]}else!d&&!e||constants.schedules[b].nh_version?(c=constants.schedules[b].periods_nh,console.log("no halfs")):c=constants.schedules[b].periods;f=!d&&!e||constants.schedules[b].nh_version?getPeriod(constants.schedules[b].start_nh,constants.schedules[b].end_nh,c,f):getPeriod(constants.schedules[b].start,constants.schedules[b].end,c,f);this.schoolOver=f.schoolOver;this.schoolStarted=f.schoolStarted;
this.schedule=b;this.period={period:f.period,start:f.start,end:f.end}}else this.schoolOver=this.schoolStarted=this.school=!1};Bell.prototype.nextPeriod=function(){this.date.setMinutesOffset(this.period.end+5);return new Bell(this.date)};$(function(){Date.prototype.getMinutesOffset=function(){return 60*this.getHours()+this.getMinutes()};Date.prototype.setMinutesOffset=function(a){var e=Number.parseInt(a/60);a%=60;this.setHours(e);this.setMinutes(a)}});