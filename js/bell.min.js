function getCurrentDate(){var a=window.location.search.indexOf("currentDate=");a=-1<a?window.location.search.substring(a+12):Date.now();return new Date(parseInt(a))}
function getPeriod(a,d,f,c){if(c<a[0]||c>=d[d.length-1])return{schoolStarted:!(c<a[0]),schoolOver:c>=d[d.length-1]};for(var b,e=0;e<a.length;e++)if(c>=a[e]&&(b=e,c<d[e]))return{inSession:!0,period:f[e],start:a[e],end:d[e],schoolStarted:!0,schoolOver:!1};return{inSession:!0,period:"!Passing",start:d[b],end:a[b+1],schoolStarted:!0,schoolOver:!1}}
var Bell=function(a,d){this.date=a=new Date(a);var f=a.getMinutesOffset(),c=a.toLocaleDateString();if(a.getDay()%6&&-1==constants.holidays.indexOf(c)){this.school=!0;var b="Standard Schedule";for(e in constants.dates)-1<constants.dates[e].indexOf(c)&&(b=e);c=constants.schedules[b].nh_version?constants.schedules[b].periods_nh:constants.schedules[b].periods;var e=d?!1:document.getElementById("half-periods-checkbox").checked;constants.schedules[b].nh_version&&$("#half-period-info").hide();if(c[0].constructor===
Array){d=!0;for(var g=-1;-1<constants.dates[b].indexOf(a.toLocaleDateString());)g++,a.setDate(a.getDate()-1);c=c[g]}else!e&&!d||constants.schedules[b].nh_version?(c=constants.schedules[b].periods_nh,console.log("no halfs")):c=constants.schedules[b].periods;f=!e&&!d||constants.schedules[b].nh_version?getPeriod(constants.schedules[b].start_nh,constants.schedules[b].end_nh,c,f):getPeriod(constants.schedules[b].start,constants.schedules[b].end,c,f);this.schoolOver=f.schoolOver;this.schoolStarted=f.schoolStarted;
this.schedule=b;this.period={period:f.period,start:f.start,end:f.end}}else this.schoolOver=this.schoolStarted=this.school=!1};Bell.prototype.nextPeriod=function(){this.date.setMinutesOffset(this.period.end+5);return new Bell(this.date)};$(function(){Date.prototype.getMinutesOffset=function(){return 60*this.getHours()+this.getMinutes()};Date.prototype.setMinutesOffset=function(a){var d=Number.parseInt(a/60);a%=60;this.setHours(d);this.setMinutes(a)}});