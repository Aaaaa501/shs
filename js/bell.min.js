function getCurrentDate(){var a=window.location.search.indexOf("currentDate=");a=-1<a?window.location.search.substring(a+12):Date.now();return new Date(parseInt(a))}
function getPeriod(a,d,f,e){if(e<a[0]||e>=d[d.length-1])return{schoolStarted:!(e<a[0]),schoolOver:e>=d[d.length-1]};for(var c,b=0;b<a.length;b++)if(e>=a[b]&&(c=b,e<d[b]))return{inSession:!0,period:f[b],start:a[b],end:d[b],schoolStarted:!0,schoolOver:!1};return{inSession:!0,period:"!Passing",start:d[c],end:a[c+1],schoolStarted:!0,schoolOver:!1}}
var Bell=function(a,d){this.date=a=new Date(a);var f=a.getMinutesOffset(),e=a.toLocaleDateString();if(a.getDay()%6&&-1==constants.holidays.indexOf(e)){this.school=!0;var c="Standard Schedule";for(b in constants.dates)-1<constants.dates[b].indexOf(e)&&(c=b);e=document.getElementById("half-periods-checkbox").checked;var b=constants.schedules[c].periods;if(b[0].constructor===Array){for(var g=-1;-1<constants.dates[c].indexOf(a.toLocaleDateString());)g++,a.setDate(a.getDate()-1);b=b[g]}else b=e||d?constants.schedules[c].periods:
constants.schedules[c].periods_nh;f=e||d?getPeriod(constants.schedules[c].start,constants.schedules[c].end,b,f):getPeriod(constants.schedules[c].start_nh,constants.schedules[c].end_nh,b,f);this.schoolOver=f.schoolOver;this.schoolStarted=f.schoolStarted;this.schedule=c;this.period={period:f.period,start:f.start,end:f.end}}else this.schoolOver=this.schoolStarted=this.school=!1};Bell.prototype.nextPeriod=function(){this.date.setMinutesOffset(this.period.end+5);return new Bell(this.date)};
$(function(){Date.prototype.getMinutesOffset=function(){return 60*this.getHours()+this.getMinutes()};Date.prototype.setMinutesOffset=function(a){var d=Number.parseInt(a/60);a%=60;this.setHours(d);this.setMinutes(a)}});